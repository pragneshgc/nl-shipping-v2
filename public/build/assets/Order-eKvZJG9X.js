import{r as b,o as oe,c as L,b as n,d as a,e as t,F as x,f as N,D as W,t as i,N as P,h as m,_ as he,j as C,M as $,i as w,T as O,U as de,w as V,O as Z,v as X,V as ee,p as fe,E as De,W as se,X as be,n as ge,Y as ye,P as _e,Z as Ce,$ as Pe}from"./app-HJno7Dcb.js";import{a as ne,b as ie,c as re}from"./print-dNO72lYB.js";const ue=(s,j)=>{let _=new Blob([s],{type:"application/"+j}),S=document.createElement("a");S.href=window.URL.createObjectURL(_),S.download=(void 0).currentOrderID+"."+j,document.body.appendChild(S),S.click(),document.body.removeChild(S)},ae={1:"NEW",2:"APPROVED",3:"REJECTED",4:"QUERIED",5:"POSTPONED",6:"CANCELLED",7:"AWAITINGSHIPPED",8:"SHIPPED",9:"SAFETYCHECK",10:"ONHOLD",11:"CALL",12:"QUERIEDDISPENSED",13:"QUERIEDNOTDISPENSED",14:"QUERIEDNOREPLY",15:"QUERIEDARCHIVED"},Se={3:"images/logo/tnt.png",4:"images/logo/dpd.png",5:"images/logo/rmail.png",7:"images/logo/ups.png",8:"images/logo/tnt.png",10:"images/logo/dhl.png"},ce="/build/assets/iconPaper-Jsyd6hjU.png",K={Repeats:"Commercial Value",Name:"Name",Surname:"Surname",DAddress1:"Delivery Address Line 1",DAddress2:"Delivery Address Line 2",DAddress3:"Delivery Town",DAddress4:"Delivery Province",DPostcode:"Delivery Postcode",DCountryCode:"Delivery Country",Address1:"Home Address Line 1",Address2:"Home Address Line 2",Address3:"Home Town",Address4:"Home Province",Postcode:"Home Postcode",CountryCode:"Home Country",Telephone:"Telephone",Email:"Email",Notes:"Notes",TokenID:"COD Amount",TrackingCode:"Tracking Code",DeliveryID:"Delivery Company",APNotificationLanguage:"UPS Notification Language",APNotificationValue:"UPS Notification Email"},Ie={class:"table table-hover table-diff mt-20"},$e=t("thead",null,[t("tr",null,[t("th",null," Field "),t("th",null," Current Value "),t("th",null," New Value ")])],-1),Oe={key:0},we={key:1},Ee={key:2},ke={key:3},Ue={key:0},Ae={key:1},xe={key:2},je={key:3},Re={key:0},Te=t("td",{colspan:"3"},[t("h3",null,"UPS Access Point Details")],-1),Ne=[Te],Be={key:0},Le={key:1},Ve={key:2},He={key:3},ze={key:0},Me={key:1},Fe={key:2},qe={key:3},Ye={__name:"DiffTableAddress",props:["oldObject","oldObjectUPS","newObject","newObjectUPS","countriesProp","companiesProp","getDetails"],emits:["difftable.error"],setup(s,{emit:j}){const _=s,S=j,M=b([]),h=b([]),E=b(!0),R=b(!0);oe(()=>{_.getDetails&&(y(),T())});const g=L(()=>_.getDetails?M:_.countriesProp),B=L(()=>_.getDetails?h:_.companiesProp),e=(f,I=[])=>{let k="Unknown";return I.length<=0&&(I=g.value),I.forEach(o=>{o.CountryID==f&&(k=o.Name)}),k},y=()=>{axios.get("/countries").then(f=>{M.value=f.data.data,E.value=!1}).catch(f=>{console.warn(f.response.data.message),S("difftable.error"),E.value=!1})},l=(f,I=!1)=>{let k="Unknown";return I||(I=B.value),I.forEach(o=>{o.SettingID==f&&(k=o.Name)}),k},T=()=>{axios.get("/delivery-companies").then(f=>{h.value=f.data.data,R.value=!1}).catch(f=>{console.warn(f.response.data.message),S("difftable.error"),R.value=!1})};return(f,I)=>(n(),a("table",Ie,[$e,t("tbody",null,[(n(!0),a(x,null,N(s.newObject,(k,o)=>(n(),a("tr",{key:o},[t("td",{class:W([s.oldObject[o]==s.newObject[o]||s.oldObject[o]==null&&s.newObject[o]==""?"":"row-danger"])},i(P(K)[o]),3),t("td",{class:W([s.oldObject[o]==s.newObject[o]||s.oldObject[o]==null&&s.newObject[o]==""?"":"row-danger"])},[o=="DeliveryID"?(n(),a("span",Oe,i(l(s.oldObject[o])),1)):o=="DCountryCode"?(n(),a("span",we,i(e(s.oldObject[o])),1)):o=="CountryCode"?(n(),a("span",Ee,i(e(s.oldObject[o])),1)):(n(),a("span",ke,i(s.oldObject[o]),1))],2),t("td",{class:W([s.oldObject[o]==s.newObject[o]||s.oldObject[o]==null&&s.newObject[o]==""?"":"row-danger"])},[o=="DeliveryID"?(n(),a("span",Ue,i(l(s.newObject[o])),1)):o=="DCountryCode"?(n(),a("span",Ae,i(e(s.newObject[o])),1)):o=="CountryCode"?(n(),a("span",xe,i(e(s.newObject[o])),1)):(n(),a("span",je,i(s.newObject[o]),1))],2)]))),128)),s.newObjectUPS&&s.newObjectUPS.length!=0?(n(),a("tr",Re,Ne)):m("",!0),(n(!0),a(x,null,N(s.newObjectUPS,(k,o)=>(n(),a("tr",{key:o},[t("td",{class:W([s.oldObjectUPS[o]!=s.newObjectUPS[o]||!(s.oldObjectUPS[o]==null&&s.newObjectUPS[o]=="")?"row-danger":""])}," AP "+i(P(K)[o]),3),t("td",{class:W([s.oldObjectUPS[o]!=s.newObjectUPS[o]||!(s.oldObjectUPS[o]==null&&s.newObjectUPS[o]=="")?"row-danger":""])},[o=="DeliveryID"?(n(),a("span",Be,i(l(s.oldObjectUPS[o])),1)):o=="DCountryCode"?(n(),a("span",Le,i(e(s.oldObjectUPS[o])),1)):o=="CountryCode"?(n(),a("span",Ve,i(e(s.oldObjectUPS[o])),1)):(n(),a("span",He,i(s.oldObjectUPS[o]),1))],2),t("td",{class:W([s.oldObjectUPS[o]!=s.newObjectUPS[o]||!(s.oldObjectUPS[o]==null&&s.newObjectUPS[o]=="")?"row-danger":""])},[o=="DeliveryID"?(n(),a("span",ze,i(l(s.newObjectUPS[o])),1)):o=="DCountryCode"?(n(),a("span",Me,i(e(s.newObjectUPS[o])),1)):o=="CountryCode"?(n(),a("span",Fe,i(e(s.newObjectUPS[o])),1)):(n(),a("span",qe,i(s.newObjectUPS[o]),1))],2)]))),128))])]))}},Ge={class:"modal"},Qe={key:0,class:"modal-header"},We={class:"flexContent"},Ke={class:"orderDetails"},Je=["src"],Xe=t("span",null,"Order #: ",-1),Ze=t("span",null,"Name: ",-1),et=t("span",null,"Surname: ",-1),tt=t("span",null,"Status: ",-1),nt={key:0},at=t("span",null,"Tracking Code: ",-1),ot={key:1},lt=t("span",null,"Commercial value: ",-1),st={key:0,class:"flexContent"},it={class:"productListItem mb-10"},rt={class:"title"},ut={class:"form-column"},dt=t("h3",null,"Home Details",-1),ct={key:0,class:"form-group form-group-2"},vt=["for"],mt=["name","onUpdate:modelValue"],pt=["onUpdate:modelValue"],ht=["value"],ft=["onUpdate:modelValue"],Dt=["value"],bt={class:"form-column"},gt=t("h3",null,"Delivery Details",-1),yt={key:0,class:"form-group form-group-2"},_t=["for"],Ct=["name","onUpdate:modelValue"],Pt=["onUpdate:modelValue"],St=["value"],It=["onUpdate:modelValue"],$t=["value"],Ot={class:"form-group form-group-2"},wt={for:"Notes"},Et={class:"form-column"},kt={key:0},Ut=["for"],At=["name","onUpdate:modelValue"],xt=["onUpdate:modelValue"],jt=["value"],Rt={key:0,class:"pxp-form mb-20"},Tt=t("div",{class:"infoBox warning"},[t("p",null,"Please review and confirm all the changes in the order before saving!")],-1),Nt={key:0,class:"modal-footer"},Bt={key:0},Lt={key:1},Vt=t("span",null," Back ",-1),Ht=[Vt],zt={key:1,class:"loader",style:{}},Mt={__name:"EditOrderAddress",props:["orderID","orderStatus","products"],emits:["closeorder","orderupdate"],setup(s,{emit:j}){const _=s,S=j,M=["Repeats","DAddress1","DAddress2","DAddress3","DAddress4","DPostcode","DCountryCode","DeliveryID","TrackingCode"],h=["Name","Surname","Address1","Address2","Address3","Address4","Postcode","CountryCode","Telephone","Email","TokenID","APNotificationLanguage","APNotificationValue"],E=b([]),R=b({}),g=b({}),B=b({}),e=b({}),y=b([]),l=b({order:{},oldOrder:{},ups:{},oldUps:{}}),T=b(!0),f=b(!1);oe(()=>{o(),k(),F()});const I=()=>{f.value=!1,R.value={},B.value={},e.value={},l.value={order:{},oldOrder:{},ups:{},oldUps:{}},S("closeorder")},k=()=>{axios.get("/delivery-companies").then(p=>{E.value=p.data.data}).catch(p=>{console.warn(p.response.data.message)})},o=()=>{axios.get("/countries").then(p=>{y.value=p.data.data}).catch(p=>{console.warn(p.response.data.message)})},F=()=>{axios.get("/order-edit/"+_.orderID).then(p=>{l.value=p.data.data,T.value=!1}).catch(p=>{console.warn(p.response.data.message),T.value=!1})},q=he.isEqual,J=()=>{f.value?Y():axios.post(`/order-edit/check/${_.orderID}`,{order:l.value.order,ups:l.value.ups}).then(p=>{Object.keys(p.data.data.changes).length>0||Object.keys(p.data.data.changesUPS).length?(R.value=p.data.data.changes,g.value=p.data.data.changesUPS,B.value=p.data.data.old,e.value=p.data.data.oldUPS,f.value=!0):(f.value=!1,S("closeorder"))}).catch(p=>{f.value=!1,ee(p)})},Y=()=>{axios.post("/order-edit/"+_.orderID,{order:l.value.order,ups:l.value.ups}).then(p=>{fe("Saved"),I(),f.value=!1,S("orderupdate")}).catch(p=>{ee(p),I(),f.value=!1,S("orderupdate")})},te=()=>{f.value=!1,R.value={},g.value={}};return(p,U)=>(n(),a("div",null,[t("div",{class:"backdrop",onClick:U[0]||(U[0]=D=>I())}),t("div",Ge,[T.value?m("",!0):(n(),a("div",Qe,[C(O,{name:"fade"},{default:$(()=>[t("section",We,[t("div",Ke,[t("img",{src:P(ce)},null,8,Je),t("ul",null,[t("li",null,[Xe,w(i(s.orderID),1)]),t("li",null,[Ze,w(i(l.value.order.Name),1)]),t("li",null,[et,w(i(l.value.order.Surname),1)]),t("li",null,[tt,w(i(s.orderStatus),1)]),l.value.order.TrackingCode!=""&&l.value.order.TrackingCode!=null?(n(),a("li",nt,[at,w(i(l.value.order.TrackingCode),1)])):m("",!0),l.value.order.Repeats!="0"&&l.value.order.Repeats!=""&&[143,162,205,243].includes(l.value.order.DCountryCode)?(n(),a("li",ot,[lt,w(i(l.value.order.Repeats),1)])):m("",!0)])])])]),_:1}),C(O,{name:"fade"},{default:$(()=>[s.products.length!=0?(n(),a("section",st,[(n(!0),a(x,null,N(s.products,D=>(n(),a("div",it,[t("div",rt,[t("h3",null,i(D.Name)+", "+i(D.Dosage)+" x "+i(D.Quantity)+" "+i(D.Unit),1)])]))),256))])):m("",!0)]),_:1})])),C(O,{name:"fade"},{default:$(()=>[y.value.length!=0&&E.value.length!=0&&!T.value&&Object.keys(R.value).length==0&&Object.keys(g.value).length==0?(n(),a("form",{key:0,onSubmit:de(J,["prevent"]),class:"pxp-form mb-20"},[t("div",ut,[dt,(n(!0),a(x,null,N(l.value.order,(D,c)=>(n(),a(x,{key:c},[h.includes(c)?(n(),a("div",ct,[t("label",{for:D},i(P(K)[c]),9,vt),["CountryCode","DCountryCode","DeliveryID","Notes"].includes(c)?["DCountryCode","CountryCode"].includes(c)?V((n(),a("select",{key:1,"onUpdate:modelValue":r=>l.value.order[c]=r},[(n(!0),a(x,null,N(y.value,r=>(n(),a("option",{value:r.CountryID},i(r.Name),9,ht))),256))],8,pt)),[[X,l.value.order[c]]]):["DeliveryID"].includes(c)?V((n(),a("select",{key:2,"onUpdate:modelValue":r=>l.value.order[c]=r},[(n(!0),a(x,null,N(E.value,r=>(n(),a("option",{value:r.SettingID},i(r.Name),9,Dt))),256))],8,ft)),[[X,l.value.order[c]]]):m("",!0):V((n(),a("input",{key:0,class:"",name:D,placeholder:"","onUpdate:modelValue":r=>l.value.order[c]=r},null,8,mt)),[[Z,l.value.order[c]]])])):m("",!0)],64))),128))]),t("div",bt,[gt,(n(!0),a(x,null,N(l.value.order,(D,c)=>(n(),a(x,{key:c},[M.includes(c)?(n(),a("div",yt,[t("label",{for:D},i(P(K)[c]),9,_t),["CountryCode","DCountryCode","DeliveryID","Notes"].includes(c)?["DCountryCode","CountryCode"].includes(c)?V((n(),a("select",{key:1,"onUpdate:modelValue":r=>l.value.order[c]=r},[(n(!0),a(x,null,N(y.value,r=>(n(),a("option",{value:r.CountryID},i(r.Name),9,St))),256))],8,Pt)),[[X,l.value.order[c]]]):["DeliveryID"].includes(c)?V((n(),a("select",{key:2,"onUpdate:modelValue":r=>l.value.order[c]=r},[(n(!0),a(x,null,N(E.value,r=>(n(),a("option",{value:r.SettingID},i(r.Name),9,$t))),256))],8,It)),[[X,l.value.order[c]]]):m("",!0):V((n(),a("input",{key:0,class:"",name:D,placeholder:"","onUpdate:modelValue":r=>l.value.order[c]=r},null,8,Ct)),[[Z,l.value.order[c]]])])):m("",!0)],64))),128)),t("div",Ot,[t("label",wt,i(P(K).Notes),1),V(t("textarea",{style:{"min-width":"300px","min-height":"60px","line-height":"1"},placeholder:"Add notes here if you want them to show for dispensers and customer support","onUpdate:modelValue":U[1]||(U[1]=D=>l.value.order.Notes=D),class:"form-control tBoxSize02"},null,512),[[Z,l.value.order.Notes]])])]),t("div",Et,[l.value.ups!=null?(n(),a("h3",kt,"UPS Access Point")):m("",!0),(n(!0),a(x,null,N(l.value.ups,(D,c)=>(n(),a("div",{class:"form-group",key:c},[t("label",{for:D},i(P(K)[c]),9,Ut),["CountryCode","DCountryCode"].includes(c)?["DCountryCode","CountryCode"].includes(c)?V((n(),a("select",{key:1,"onUpdate:modelValue":r=>l.value.ups[c]=r},[(n(!0),a(x,null,N(y.value,r=>(n(),a("option",{value:r.CountryID},i(r.Name),9,jt))),256))],8,xt)),[[X,l.value.ups[c]]]):m("",!0):V((n(),a("input",{key:0,class:"",name:D,placeholder:"","onUpdate:modelValue":r=>l.value.ups[c]=r},null,8,At)),[[Z,l.value.ups[c]]])]))),128))])],32)):m("",!0)]),_:1}),C(O,{name:"fade"},{default:$(()=>[(Object.keys(R.value).length>0||Object.keys(g.value).length>0)&&!T.value?(n(),a("div",Rt,[Tt,C(Ye,{"old-object":B.value,"new-object":R.value,"old-object-u-p-s":e.value,"new-object-u-p-s":g.value,"countries-prop":y.value,"companies-prop":E.value},null,8,["old-object","new-object","old-object-u-p-s","new-object-u-p-s","countries-prop","companies-prop"])])):m("",!0)]),_:1}),C(O,{name:"fade"},{default:$(()=>[T.value?m("",!0):(n(),a("div",Nt,[!P(q)(l.value.order,l.value.oldOrder)||!P(q)(l.value.ups,l.value.oldUPS)?(n(),a("button",{key:0,onClick:U[2]||(U[2]=D=>J()),class:"btn btnSize01 tertiaryBtn bigButton big-square-button"},[f.value?(n(),a("span",Lt," Save ")):(n(),a("span",Bt," Review "))])):m("",!0),(!P(q)(l.value.order,l.value.oldOrder)||!P(q)(l.value.ups,l.value.oldUPS))&&f.value?(n(),a("button",{key:1,onClick:U[3]||(U[3]=D=>te()),class:"btn btnSize01 tertiaryBtn bigButton big-square-button"},Ht)):m("",!0),t("button",{onClick:U[4]||(U[4]=D=>I()),class:"btn btnSize01 secondaryBtn bigButton"},"Cancel")]))]),_:1}),T.value?(n(),a("div",zt,"Loading...")):m("",!0),t("span",{class:"close",onClick:U[5]||(U[5]=D=>I())},"X")])]))}},Ft={class:"content"},qt={class:"orderSearch flexContent"},Yt=t("h3",null,"Search order",-1),Gt={class:"formItemsGroup floatLeft flex mt-20"},Qt=t("button",{class:"btn btnSize02 tertiaryBtn",type:"submit"}," Search ",-1),Wt={key:0,class:"flexContent"},Kt=t("h2",null,"Order Details",-1),Jt={class:"orderDetails"},Xt=["src"],Zt=t("span",null,"Order #: ",-1),en=t("span",null,"Name: ",-1),tn=t("span",null,"Surname: ",-1),nn=t("span",null,"Status: ",-1),an={key:0},on=t("span",null,"Tracking Code: ",-1),ln={key:1},sn=t("span",null,"Commercial value: ",-1),rn=["href"],un={key:0,title:"Download Documentation",class:"btn btnSize02 tertiaryBtn",type:"button"},dn=t("i",{class:"fa fa-file"},null,-1),cn=[dn],vn={key:0,class:"flexContent"},mn={key:0,class:"flexContent flex-direction-column"},pn={key:0,style:{float:"none",background:"#f7941d4f",width:"100%",padding:"5px","text-align":"center","font-weight":"700!important",border:"3px solid #d291007d","margin-bottom":"20px","font-size":"20px"}},hn=["src"],fn={key:0,class:"flexContent flex-direction-row"},Dn={style:{width:"100%",display:"flex","justify-content":"center","align-items":"center"}},bn={key:0,style:{display:"flex","justify-content":"center","align-items":"center"}},gn=["disabled"],yn={key:0,class:"loader",style:{}},_n={key:1},Cn=["disabled"],Pn=["disabled"],Sn={key:1},In={key:0},$n={class:"infoBox warning"},On={key:0},wn=t("div",{class:"infoBox warning"},[t("p",null," THIS ORDER HAS NO COMMERCIAL VALUE. PLEASE SET VALUE BY CLICKING EDIT. ")],-1),En=[wn],kn={key:0},Un=t("div",{class:"infoBox warning"},[t("p",null," ORDER VALUE GREATER THAN 270 AND WILL REQUIRE CN23 FORM. USE ROYAL MAIL APP FOR SHIPPING. ")],-1),An=[Un],xn={key:0},jn=t("div",{class:"infoBox warning"},[t("p",null," THIS ORDER IS NOT READY TO BE SHIPPED. PLEASE SPEAK TO A DISPENSING TEAM MEMBER ")],-1),Rn=[jn],Tn={key:1},Nn={class:"infoBox warning"},Bn={key:0,class:"activity"},Ln=t("h5",{class:"activity-log-header"},"Activities on this order",-1),Vn={class:"activity-action"},Hn={class:"activity-footer"},zn={key:1,class:"activity"},Mn=t("ul",{class:"activity-log-wrapper"},[t("li",{class:"activity-log-item"}," No activity log found ")],-1),Fn=[Mn],Gn={__name:"Order",setup(s){const j=De(),_=b(j.params.id),S=b([]),M=appInfo,h=b(""),E=b(!1),R=b(!1);b("");const g=b(!1),B=b(!1),e=b(null),y=b(!1),l=userInfo;oe(()=>{H()});const T=L(()=>e.value!=null?e.value.DeliveryID=="10"?"/shipment-validation/"+e.value.PrescriptionID:e.value.DeliveryID=="7"?"/api/ups/shipment-validation/"+e.value.PrescriptionID:e.value.DeliveryID=="4"?"/api/dpd/shipment-validation/"+e.value.PrescriptionID:e.value.DeliveryID=="5"?`/api/rmail/shipment-validation/${e.value.PrescriptionID}`:!1:!1),f=L(()=>e.value.DeliveryID!="10"),I=L(()=>e.value.Repeats!="0"&&e.value.Repeats!=""&&[143,162,205,243].includes(e.value.DCountryCode)),k=L(()=>e.value.Repeats!="0"&&e.value.Repeats!=""&&[143].includes(e.value.DCountryCode)),o=L(()=>e.value.PaymentMethod!="0"),F=L(()=>e.value.PaymentMethod!="0"),q=L(()=>e.value!=null?e.value.DeliveryID=="10"?"/api/dhl/label/"+e.value.PrescriptionID:e.value.DeliveryID=="7"?o.value?"/api/ups/gif/"+e.value.PrescriptionID:"/api/ups/label/"+e.value.PrescriptionID:e.value.DeliveryID=="4"?"/api/dpd/label/"+e.value.PrescriptionID:e.value.DeliveryID=="5"?"/api/rmail/label/"+e.value.PrescriptionID:!1:!1),J=u=>{if(M.label_reset_without_admin){let d={1:"System unresponsive",2:"Damaged label",3:"Label applied incorrectly"};Swal.fire({text:"Why is this label being reprinted?",input:"select",inputOptions:d,inputPlaceholder:"Select a reason",confirmButtonText:"Resend",showCancelButton:!0,inputValidator:v=>new Promise(A=>{v==="1"||v==="2"||v==="3"?A():A("Reason invalid")})}).then(v=>{v.value?(u(),axios.post("/log-reprint",{orderID:h.value,reason:d[v.value],code:"Not Required"}).then(A=>{console.log(A)}).catch(A=>{console.log(A)})):r()})}else Swal.fire({text:"Scan authorization code",input:"text",inputValue:"",inputClass:"key",inputAttributes:{autocomplete:"off",type:"hidden"},showCancelButton:!0,inputValidator:d=>new Promise(v=>{v!=""?axios.post("/resend-authorization",{code:d}).then(A=>{v()}).catch(A=>{v("The authorization code is incorrect")}):v("The authorization code can not be empty")})}).then(d=>{if(typeof d.value<"u"&&d.value!=""){let v={1:"System unresponsive",2:"Damaged label",3:"Label applied incorrectly"},A=d.value;Swal.fire({text:"Why is this label being reprinted?",input:"select",inputOptions:v,inputPlaceholder:"Select a reason",confirmButtonText:"Resend",showCancelButton:!0,inputValidator:G=>new Promise(Q=>{G==="1"||G==="2"||G==="3"?Q():Q("Reason invalid")})}).then(G=>{G.value?(u(),axios.post("/log-reprint",{orderID:h.value,reason:v[G.value],code:A}).then(Q=>{console.log(Q)}).catch(Q=>{console.log(Q)})):r()})}else r()})},Y=()=>{D(()=>{te&&(y.value=!0,axios.get(te).then(u=>{if(e.value.Printed)J(()=>{let d=e.value.DeliveryID=="7"?"xml":"csv";ue(u.data,d),e.value.Printed=!0,y.value=!1,r()});else{let d=e.value.DeliveryID=="7"?"xml":"csv";ue(u.data,d),e.value.Printed=!0,y.value=!1}z()}).catch(u=>{ee(u.response.data.message),y.value=!1,r(),z()}))})},te=L(()=>e.value!=null?e.value.DeliveryID=="10"?"/api/dhl/manual/"+e.value.PrescriptionID:e.value.DeliveryID=="7"?"/api/ups/manual/"+e.value.PrescriptionID:e.value.DeliveryID=="3"?"/api/tnt/manual/"+e.value.PrescriptionID:e.value.DeliveryID=="4"?"/api/dpd/manual/"+e.value.PrescriptionID:e.value.DeliveryID=="5"?"/api/rmail/manual/"+e.value.PrescriptionID:!1:!1),p=L(()=>e.value.Printed?"Manual Re-print":"Manual Print"),U=()=>{axios.get(`/order/${h.value}/check-document`).then(u=>{R.value=u.data.data}).catch(u=>{se(u.response.data.message)})},D=u=>{u()},c=u=>{E.value=!E.value},r=()=>{setTimeout(()=>{document.getElementById("orderID").focus()},300)},z=()=>{B.value=!0,axios.get("/order/"+h.value+"/activity").then(u=>{S.value=u.data.data,B.value=!1}).catch(u=>{ee(u.response.data.message),B.value=!1})},ve=(u=!1)=>{J(()=>{y.value=!0,o.value?ie(`${window.location.origin}/api/ups/gif/${h.value}?token=${l.token}`,()=>{}):re(q.value,f.value),k.value&&ne(`${window.location.origin}/token/ups/invoice/${h.value}?token=${l.token}`),H(h.value),y.value=!1,r()})},le=()=>{axios.post(`/api/dhl/${h.value}/resend-pdf`).then(u=>{H(),z()}).catch(u=>{ee(u.response.data.message)})},me=()=>{D(()=>{y.value=!0,T.value&&axios.get(T.value).then(u=>{u.data.data.paper_invoice&&ne(`${window.location.origin}/token/ups/invoice/${h.value}?token=${l.token}`),u.data.data.gif?ie(`${window.location.origin}/api/ups/gif/${h.value}?token=${l.token}`,()=>{}):u.data.data.rml_api?ne(`${window.location.origin}/token/rml/label/${h.value}?token=${l.token}`):re(q.value,!0),u.data.data.resend&&(Ce("Prescription PDF not sent to DHL! Trying to resend."),le()),_.value=h.value,H(),y.value=!1,r(),z()}).catch(u=>{Pe(u.response.data.message),H(),y.value=!1,r(),z()})})},pe=()=>{axios.get("/reset-order/"+h.value).then(u=>{H(h.value),z()}).catch(u=>{console.warn(u),z()})},H=()=>{_.value!=""&&(h.value=_.value,_.value=""),z(),g.value=!0,axios.get("/order/"+h.value).then(u=>{e.value=u.data.data,U(),g.value=!1}).catch(u=>{e.value=null,se(u.response.data.message),g.value=!1}),j.params.id!=h.value&&be.push({params:{id:h.value}})};return ge(()=>j.params.id,()=>{typeof j.params.id<"u"&&h.value!=j.params.id&&(_.value=j.params.id,H())}),(u,d)=>(n(),a("div",null,[t("div",Ft,[t("section",null,[t("div",qt,[Yt,t("form",{onSubmit:de(H,["prevent"]),autocomplete:"on"},[t("div",Gt,[V(t("input",{required:"","onUpdate:modelValue":d[0]||(d[0]=v=>_.value=v),class:"tBox tBoxSize02",type:"text",id:"orderID",placeholder:"Order No"},null,512),[[Z,_.value]]),Qt])],32)])]),C(O,{name:"fade"},{default:$(()=>[!g.value&&e.value!=null?(n(),a("section",Wt,[Kt,t("div",Jt,[t("img",{src:P(ce)},null,8,Xt),t("ul",null,[t("li",null,[Zt,w(i(e.value.PrescriptionID),1)]),t("li",null,[en,w(i(e.value.Name),1)]),t("li",null,[tn,w(i(e.value.Surname),1)]),t("li",null,[nn,w(i(P(ae)[e.value.Status]),1)]),e.value.TrackingCode!=""&&e.value.TrackingCode!=null?(n(),a("li",an,[on,w(i(e.value.TrackingCode),1)])):m("",!0),e.value.Repeats!="0"&&e.value.Repeats!=""&&[143,162,205,243].includes(e.value.DCountryCode)?(n(),a("li",ln,[sn,w(i(e.value.Repeats),1)])):m("",!0),t("li",null,[t("button",{onClick:d[1]||(d[1]=v=>c(e.value)),class:"btn btnSize02 tertiaryBtn",type:"button"}," Edit Address "),C(O,{name:"fade"},{default:$(()=>[t("a",{href:`/order/${h.value}/download-document`,target:"_blank"},[R.value?(n(),a("button",un,cn)):m("",!0)],8,rn)]),_:1})])])])])):m("",!0)]),_:1}),C(O,{name:"fade"},{default:$(()=>[!g.value&&e.value==null?(n(),a("section",vn," Loading ")):m("",!0)]),_:1}),C(O,{name:"fade"},{default:$(()=>[!g.value&&e.value!=null?(n(),a("section",mn,[e.value.DeliveryID==4&&e.value.SaturdayDelivery==1?(n(),a("div",pn," DPD Saturday Delivery ")):m("",!0),t("img",{style:{height:"50px"},src:P(Se)[e.value.DeliveryID]},null,8,hn)])):m("",!0)]),_:1}),C(O,{name:"fade"},{default:$(()=>[!g.value&&e.value!=null&&e.value.canPrintLabel&&[7,8].includes(e.value.Status)?(n(),a("section",fn,[t("div",Dn,[e.value.DeliveryID=="7"||e.value.DeliveryID=="10"||e.value.DeliveryID=="5"&&parseFloat(e.value.Repeats.split(/(\s+)/)[2])<=270||e.value.DeliveryID=="4"?(n(),a("div",bn,[(e.value.TrackingCode==""||e.value.TrackingCode==null)&&!F.value&&e.value.CanDecomission?(n(),a("button",{key:0,onClick:d[2]||(d[2]=v=>me()),disabled:y.value||e.value.DeliveryID=="7",class:"btn btnSize01 tertiaryBtn bigButton mr-10 big-round-button",type:"submit"},[y.value?(n(),a("div",yn,"Loading...")):(n(),a("span",_n,"Request Label"))],8,gn)):!F.value&&e.value.CanDecomission?(n(),a("button",{key:1,onClick:d[3]||(d[3]=v=>ve(!0)),disabled:y.value,class:"btn btnSize01 tertiaryBtn bigButton big-round-button",type:"submit"}," Reprint Label ",8,Cn)):m("",!0),e.value.DeliveryID=="7"&&(F.value||k.value)?(n(),a("button",{key:2,onClick:d[4]||(d[4]=v=>Y()),disabled:!0,class:"btn btnSize01 tertiaryBtn bigButton big-round-button",type:"submit"},i(p.value),1)):e.value.DeliveryID=="10"&&(F.value||k.value)?(n(),a("button",{key:3,onClick:d[5]||(d[5]=v=>Y()),class:"btn btnSize01 tertiaryBtn bigButton big-round-button",type:"submit"},i(p.value),1)):e.value.DeliveryID=="7"&&I.value&&!k.value?(n(),a("button",{key:4,onClick:d[6]||(d[6]=v=>Y()),disabled:!0,class:"btn btnSize01 tertiaryBtn",type:"submit"},i(p.value),1)):m("",!0),!F.value&&e.value.TrackingCode!=""&&e.value.TrackingCode!=null&&(P(l).role>=60||P(M).label_reset_without_admin)?(n(),a("button",{key:5,onClick:d[7]||(d[7]=v=>pe()),disabled:y.value,class:"btn btnSize01 tertiaryBtn bigButton",type:"submit"}," Reset Label ",8,Pn)):m("",!0)])):(n(),a("div",Sn,[t("button",{onClick:d[8]||(d[8]=v=>Y()),class:"btn btnSize01 tertiaryBtn bigButton big-round-button",type:"submit"},i(p.value),1)]))])])):m("",!0)]),_:1}),C(O,{name:"fade"},{default:$(()=>[!g.value&&e.value==null?(n(),a("section",In,[t("div",$n,[t("p",null,"Order with number "+i(h.value)+" was not found!",1)])])):m("",!0)]),_:1}),C(O,{name:"fade"},{default:$(()=>[!g.value&&e.value!=null&&(e.value.Repeats=="0"||e.value.Repeats=="")&&[143,162,205,243].includes(e.value.DCountryCode)?(n(),a("section",On,En)):m("",!0)]),_:1}),C(O,{name:"fade"},{default:$(()=>[!g.value&&e.value!=null&&e.value.DeliveryID=="5"&&parseFloat(e.value.Repeats.split(/(\s+)/)[2])>270?(n(),a("section",kn,An)):m("",!0)]),_:1}),C(O,{name:"fade"},{default:$(()=>{var v,A;return[!g.value&&e.value!=null&&!e.value.CanDecomission?(n(),a("section",xn,Rn)):!g.value&&![7,8].includes((v=e.value)==null?void 0:v.Status)?(n(),a("section",Tn,[t("div",Nn,[t("p",null,[w(" THIS ORDER IS NOT READY TO BE SHIPPED. THE ORDER STATUS IS "),t("b",null,i(P(ae)[(A=e.value)==null?void 0:A.Status]),1),w(". PLEASE SPEAK TO A PHARMACY TEAM MEMBER ")])])])):m("",!0)]}),_:1}),C(O,{name:"fade"},{default:$(()=>[S.value.length>0&&!B.value&&!g.value?(n(),a("section",Bn,[Ln,C(ye,{name:"slide-down",tag:"ul",class:"activity-log-wrapper",style:{"margin-top":"0px!important"}},{default:$(()=>[(n(!0),a(x,null,N(S.value,v=>(n(),a("li",{class:"activity-log-item",key:v.ActivityID},[t("div",Vn,[w(i(v.Action)+" ",1),v.Action=="DHL request label - PDF issue"&&v.Status==1?(n(),a("button",{key:0,style:{background:"red",border:"1px solid red"},class:"btn btnSize02 tertiaryBtn",onClick:d[9]||(d[9]=A=>le())}," Resend PDF ")):m("",!0)]),t("div",Hn,[t("span",null,i(v.Name),1),t("span",null,i(v.Date),1)])]))),128))]),_:1})])):!B.value&&!g.value?(n(),a("section",zn,Fn)):m("",!0)]),_:1}),C(O,{name:"fade"},{default:$(()=>[E.value?(n(),_e(Mt,{key:0,onCloseorder:d[10]||(d[10]=v=>E.value=!E.value),products:I.value?e.value.Products:[],orderID:h.value,orderStatus:P(ae)[e.value.Status],onOrderupdate:d[11]||(d[11]=v=>H())},null,8,["products","orderID","orderStatus"])):m("",!0)]),_:1})])]))}};export{Gn as default};
